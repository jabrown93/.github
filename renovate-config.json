{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:recommended",
    ":configMigration",
    ":pinDevDependencies",
    "abandonments:recommended",
    "npm:unpublishSafe",
    "schedule:automergeDaily",
    ":rebaseStalePrs",
    ":automergeMinor",
    ":maintainLockFilesWeekly",
    ":automergeRequireAllStatusChecks",
    ":combinePatchMinorReleases",
    ":docker",
    "security:openssf-scorecard",
    ":npm",
    ":enableRenovate",
    ":ignoreUnstable"
  ],
  "timezone": "America/Los_Angeles",
  "rangeStrategy": "replace",
  "commitBodyTable": true,
  "prHourlyLimit": 10,
  "dependencyDashboardOSVVulnerabilitySummary": "all",
  "automergeType": "pr",
  "automergeStrategy": "squash",
  "platformAutomerge": false,
  "platformCommit": "enabled",
  "regexManagers": [
    {
      "fileMatch": [
        "^.*$"
      ],
      "matchStrings": [
        "[\"']{0,1}(?<currentValue>[^\\s\"']*)[\"']{0,1}\\s+#\\s+(renovate\\s+)(?<dataSource>[^\\s\"']+)\\s+(?<depName>[^\\s\"']+)"
      ]
    },
    {
      "fileMatch": [
        "^.*$"
      ],
      "datasourceTemplate": "docker",
      "matchStrings": [
        "[\"']{0,1}(?<depName>[^\\s\"']+):(?<currentValue>[^\\s\"']*)[\"']{0,1}\\s+#\\s+(renovate)"
      ]
    }
  ],
  "npm": {
    "postUpdateOptions": [
      "npmDedupe"
    ]
  },
  "packageRules": [
    {
      "matchUpdateTypes": [
        "major"
      ],
      "labels": [
        "renovate-major",
        "needs-review"
      ]
    },
    {
      "matchUpdateTypes": [
        "patch"
      ],
      "labels": [
        "renovate-patch"
      ]
    },
    {
      "matchUpdateTypes": [
        "minor"
      ],
      "labels": [
        "renovate-minor"
      ]
    },
    {
      "matchDatasources": [
        "docker"
      ],
      "matchCurrentVersion": "^\\d+\\.\\d+(?:\\.\\d+)?-\\d{8}$",
      "versioning": "regex:^(?<major>\\d+)\\.(?<minor>\\d+)(?:\\.(?<patch>\\d+))?-(?<year>\\d{4})(?<month>\\d{2})(?<day>\\d{2})$",
      "allowedVersions": "!/^(2020|2021).*/"
    },
    {
      "matchDatasources": [
        "docker"
      ],
      "matchPackageNames": [
        "/^lscr\\.io\\/linuxserver\\//"
      ],
      "matchCurrentVersion": "^v?[A-Za-z0-9._-]+-[Ll][Ss]\\d+$",
      "versioning": "regex:^v?(?<compatibility>[A-Za-z0-9._-]+)-[Ll][Ss](?<major>\\d+)$",
      "allowedVersions": "!/^(2020|2021).*/"
    }
  ]
}
