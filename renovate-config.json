{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:best-practices",
    "group:allNonMajor",
    "npm:unpublishSafe",
    ":semanticCommits",
    "schedule:daily",
    "schedule:automergeDaily",
    ":rebaseStalePrs",
    ":automergeMinor",
    ":maintainLockFilesWeekly",
    ":automergeRequireAllStatusChecks",
    ":combinePatchMinorReleases",
    ":dependencyDashboardApproval",
    ":docker",
    "security:openssf-scorecard",
    ":npm"
  ],
  "timezone": "America/Los_Angeles",
  "rangeStrategy": "replace",
  "commitBodyTable": true,
  "prHourlyLimit": 10,
  "dependencyDashboardOSVVulnerabilitySummary": "all",
  "automergeType": "pr",
  "automergeStrategy": "squash",
  "platformAutomerge": false,
  "platformCommit": "enabled",
  "regexManagers": [
    {
      "fileMatch": [
        "^.*$"
      ],
      "matchStrings": [
        "[\"']{0,1}(?<currentValue>[^\\s\"']*)[\"']{0,1}\\s+#\\s+(renovate\\s+)(?<dataSource>[^\\s\"']+)\\s+(?<depName>[^\\s\"']+)"
      ]
    },
    {
      "fileMatch": [
        "^.*$"
      ],
      "datasourceTemplate": "docker",
      "matchStrings": [
        "[\"']{0,1}(?<depName>[^\\s\"']+):(?<currentValue>[^\\s\"']*)[\"']{0,1}\\s+#\\s+(renovate)"
      ]
    }
  ],
  "npm": {
    "postUpdateOptions": [
      "npmDedupe"
    ]
  },
  "packageRules": [
    {
      "matchUpdateTypes": [
        "major"
      ],
      "semanticCommitType": "feat!",
      "labels": [
        "renovate-major",
        "needs-review"
      ]
    },
    {
      "matchUpdateTypes": [
        "patch"
      ],
      "semanticCommitType": "fix",
      "labels": [
        "renovate-patch"
      ]
    },
    {
      "matchUpdateTypes": [
        "minor"
      ],
      "semanticCommitType": "feat",
      "labels": [
        "renovate-minor"
      ]
    },
    {
      "description": "Linuxserver: prefer semver when current tag is semver-like; ignore date-only tags",
      "matchDatasources": [
        "docker"
      ],
      "matchPackageNames": [
        "/^lscr\\.io\\/linuxserver\\//"
      ],
      "matchCurrentVersion": "^v?\\d+(?:\\.\\d+){1,2}(?:-[Ll][Ss]\\d+)?$",
      "extractVersion": "^v?(?<version>\\d+(?:\\.\\d+){1,2})",
      "versioning": "semver-coerced",
      "allowedVersions": "/^v?\\d+(?:\\.\\d+){1,2}(?:-[Ll][Ss]\\d+)?$/"
    },
    {
      "matchDatasources": [
        "docker"
      ],
      "matchCurrentVersion": "^\\d+\\.\\d+(?:\\.\\d+)?-\\d{8}$",
      "versioning": "regex:^(?<major>\\d+)\\.(?<minor>\\d+)(?:\\.(?<patch>\\d+))?-(?<year>\\d{4})(?<month>\\d{2})(?<day>\\d{2})$"
    },
    {
      "matchDatasources": [
        "docker"
      ],
      "matchPackageNames": [
        "/^lscr\\.io\\/linuxserver\\//"
      ],
      "matchCurrentVersion": "^v?[A-Za-z0-9._-]+-[Ll][Ss]\\d+$",
      "versioning": "regex:^v?(?<compatibility>[A-Za-z0-9._-]+)-[Ll][Ss](?<major>\\d+)$"
    }
  ]
}
